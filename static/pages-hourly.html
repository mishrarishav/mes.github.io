<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta
      name="description"
      content="Responsive Admin &amp; Dashboard Template based on Bootstrap 5"
    />
    <meta name="author" content="AdminKit" />
    <meta
      name="keywords"
      content="adminkit, bootstrap, bootstrap 5, admin, dashboard, template, responsive, css, sass, html, theme, front-end, ui kit, web"
    />

    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link rel="shortcut icon" href="img/icons/icon-48x48.png" />

    <link
      rel="canonical"
      href="https://demo-basic.adminkit.io/pages-profile.html"
    />

    <title>Hourly</title>

    <link href="css/app.css" rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>
  <script src="https://code.highcharts.com/modules/export-data.js"></script>
  <script src="https://code.highcharts.com/modules/accessibility.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <!-- Bootstrap JS -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <!-- Highcharts -->
  <script src="https://code.highcharts.com/highcharts.js"></script>
  </head>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      position: relative;
    }

    .chart-container {
      position: relative; /* Set the container as relative */
    }
    .flex-fill {
      padding: 15px;
    }
    .label-container {
      position: absolute;
      top: -4px;
      left: 18px;
      width: 100%;
      display: flex;
      justify-content: space-between;
      pointer-events: none;
      z-index: 2; /* Ensure labels appear above the canvas */
    }

    .label-item {
      position: absolute;
      font-weight: bold;
      pointer-events: none;
      /* Transparent background */
      padding: 2px 6px;
      border-radius: 4px;
      z-index: 3; /* Ensure labels are above other elements */
      text-align: center;
      font-size: 15px; /* Increase font size for labels */
    }

    .y-axis-label {
      font-size: 20px; /* Increase font size for Y-axis labels */
      font-weight: bold;
    }

    .x-axis-label {
      font-size: 20px; /* Increase font size for X-axis label */
      font-weight: bold;
    }

    .chartjs-text {
      font-weight: bold; /* Bolden legends */
    }
  </style>

  <body>
    <div class="wrapper">
      <nav id="sidebar" class="sidebar js-sidebar">
        <div class="sidebar-content js-simplebar">
          <a class="sidebar-brand" href="index.html">
            <span class="align-middle">PG</span>
          </a>

          <ul class="sidebar-nav">
            <li class="sidebar-header">Dashboard</li>

            <li class="sidebar-item">
              <a class="sidebar-link" href="index.html">
                <i class="align-middle" data-feather="sliders"></i>
                <span class="align-middle">Admin</span>
              </a>
            </li>

            <li class="sidebar-item active">
              <a class="sidebar-link" href="pages-hourly.html">
                <i class="align-middle" data-feather="user"></i>
                <span class="align-middle">Hourly</span>
              </a>
            </li>

            <li class="sidebar-item">
              <a class="sidebar-link" href="pages-sign-in.html">
                <i class="align-middle" data-feather="log-in"></i>
                <span class="align-middle">Log out </span>
              </a>
            </li>

            <li class="sidebar-item">
              <a class="sidebar-link" href="pages-sign-up.html">
                <i class="align-middle" data-feather="user-plus"></i>
                <span class="align-middle">Sign up</span>
              </a>
            </li>
          </ul>
        </div>
      </nav>

      <div class="main">
        <nav class="navbar navbar-expand navbar-light navbar-bg">
          <a class="sidebar-toggle js-sidebar-toggle">
            <i class="hamburger align-self-center"></i>
          </a>

          <div class="navbar-collapse collapse">
            <ul class="navbar-nav navbar-align">
              <li class="nav-item dropdown">
                <a
                  class="nav-icon dropdown-toggle d-inline-block d-sm-none"
                  href="#"
                  data-bs-toggle="dropdown"
                >
                  <i class="align-middle" data-feather="settings"></i>
                </a>

                <a
                  class="nav-link dropdown-toggle d-none d-sm-inline-block"
                  href="#"
                  data-bs-toggle="dropdown"
                >
                  <!-- <img src="img/avatars/avatar.jpg" class="avatar img-fluid rounded me-1" alt="Charles Hall" />  -->
                  <span class="text-dark">Admin</span>
                </a>
                <div class="dropdown-menu dropdown-menu-end">
                  <a class="dropdown-item" href="pages-hourly.html"
                    ><i class="align-middle me-1" data-feather="user"></i>
                    Profile</a
                  >
                  <a class="dropdown-item" href="#"
                    ><i class="align-middle me-1" data-feather="pie-chart"></i>
                    Analytics</a
                  >
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="index.html"
                    ><i class="align-middle me-1" data-feather="settings"></i>
                    Settings & Privacy</a
                  >
                  <a class="dropdown-item" href="#"
                    ><i
                      class="align-middle me-1"
                      data-feather="help-circle"
                    ></i>
                    Help Center</a
                  >
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="#">Log out</a>
                </div>
              </li>
            </ul>
          </div>
        </nav>

        <main class="content">
          <div class="container-fluid p-0">
        
           
        

          
            <nav
              aria-label="breadcrumb"
              style="background-color: #222e3cd6; border-radius: 3px"
            >
              <ol class="breadcrumb">
                <h1 class="h3 mb-3" style="padding: 8px; color: aliceblue">
                  <strong>Hourly Status - </strong> Per Hour
                </h1>
              </ol>
            </nav>



























            <div class="row">
              <div class="col-12 col-lg-12 col-xxl-9 d-flex w-100">
                <div class="">
                  <div class="row">







                    <style>
                     .blue-header {
                background-color: #ffffff;
                color: white;
              }
          
              /* Custom styling for table rows */
              tbody tr:nth-child(even) {
                background-color: #97cadf;
              }
          
              tbody tr:hover {
                background-color: #e0e0e0;
              }
          
              /* Borders between columns */
              table {
                border-collapse: collapse;
                width: 50%;
                table-layout: fixed
                
              }
              tfoot {
  position: sticky;
  bottom: 0;
  background-color: #1b1bae91;
  font-size: 20px;
  font-weight: bold;
}
          
              th, td {
                border: 1px solid #dddddd;
                text-align: left;
                padding: 8px;
                font-size: 20px;
                font-weight: bold;
              }
          
              th {
                background-color: #3737ae68;
                color: white;
              }
                  
                      /* Additional CSS for Highcharts chart container */
                      #barChartContainer {
                        margin-top: -15px; /* Adjust margin as needed */
                      }
                  
                      /* Adjust the width and height of the chart container */
                      .chart-container {
                        height: 300px; /* Set the height as desired */
                        width: 100%; /* Adjust the width */
                      }

                    </style>


<div class="col-md-6 card flex-fill" style="height: 330px; overflow-y: auto;">
  <table class="table" style="width: 100%;">
    <thead>
      <tr class="blue-header">
        <th>Sl. no</th>
        <th>Model</th>
        <th>Quantity</th>
      </tr>
    </thead>
    <tbody id="tableBody">
      <!-- Rows will be added dynamically using JavaScript -->
    </tbody>
    <tfoot style="position: sticky; bottom: 0; background-color: #1b1bae91;">
      <tr class="blue-header">
        <td colspan="2">Total</td>
        <td id="totalQuantity"></td>
      </tr>
    </tfoot>
  </table>
</div>


                    <div class="col-md-6 card flex-fill">
                      <div class="chart-container">
                        <!-- This div will contain the chart -->
                        <div id="barChartContainer" style="height: 254px;"></div>
                      </div>
                    </div>
                   
                  
                    <!-- Your JavaScript code -->
                    <script>
                      // Function to generate table rows
    function generateRows(data) {
      let html = '';
      let totalQuantity = 0;

      data.forEach((row, index) => {
        const rowColorClass = index % 2 === 0 ? '' : 'table-row-colored';
        html += `
          <tr class="${rowColorClass}">
            <td>${index + 1}</td>
            <td>${row.Model}</td>
            <td>${row.line_out}</td>
          </tr>
        `;
        totalQuantity += row.line_out;
      });

      // Append rows to table body
      $('#tableBody').html(html);

      // Set total quantity in the footer
      $('#totalQuantity').text(totalQuantity);
    }

    // Get current date and time
    let now = new Date();

    // Format date as yyyy-mm-dd
    let date = now.toISOString().split('T')[0];

    // Determine shift based on current time
    let hours = now.getHours();
    let shift = (hours >= 8 && hours < 20) ? 'a' : 'b';

    // Fetch data from the API and generate table rows
    // fetch(`http://110.172.134.186:89/hourly_dashboard?dt=${date}&shift=${shift}`)
    fetch(`http://110.172.134.186:89/hourly_dashboard?dt=2023-12-25&shift=a`)
      .then(response => response.json())
      .then(data => {
        generateRows(data);
      })
      .catch(error => console.error('Error:', error));

 

                 // Fetch data from the API
fetch('http://110.172.134.186:89/line_dashboard')
  .then(response => response.json())
  .then(data => {
    // Prepare data for the chart
    const categories = data.map(item => `L ${item.line_no}`);
    const seriesData = data.map(item => item.totalout);
    const totalLineOut = seriesData.reduce((acc, curr) => acc + curr, 0);

    // Create the chart
    Highcharts.chart('barChartContainer', {
      chart: {
        type: 'bar'
      },
      title: {
        text: `Total Count -  ${totalLineOut}`,
        style: {
                                                fontSize: "30px",
                                                fontWeight: "bold",
                                            },
      },
      xAxis: {
        categories: categories,
        style: {
          fontSize: "40px",
        },
        labels: {
          style: {
            fontSize: "30px",
            fontWeight: "bold",
          },
        },
      },
      yAxis: {
        text: "Line Out",
        style: {
          fontSize: "30px",
        },
        labels: {
          style: {
            fontSize: "30px",
            fontWeight: "bold",
          },
        },
      },
      plotOptions: {
        series: {
          pointWidth: 50, // Adjust the thickness of the bars (in pixels)
          dataLabels: {
            enabled: true, // Show data labels on top of the bars
            format: '{y}', // Display the value of each bar
            style: {
              // Outline for better readability
           
                                                fontSize: "30px",
                                                fontWeight: "bold",
                                          
            }
          },
          lineWidth: 3,
        }
      },
      credits: {
        enabled: false // Disable Highcharts credits
      },
      series: [{
        data: seriesData // Use fetched data values
      }]
    });
  })
  .catch(error => console.error('Error:', error));
                   
                   
                   
                      </script>















                  
                  <div id="container" class="mt-4"></div>
                  
                  <script src="https://code.highcharts.com/highcharts.js"></script>
                  <script>
                    const dateInput = document.createElement("input");
                    dateInput.type = "date";
                    dateInput.id = "datetimepicker-dashboard";
                    dateInput.className = "form-control";
                  
                    const shiftSelect = document.createElement("select");
                    shiftSelect.id = "shiftFilter";
                    shiftSelect.className = "form-control";
                  
                    const optionA = document.createElement("option");
                    optionA.value = "A";
                    optionA.textContent = "A";
                    const optionB = document.createElement("option");
                    optionB.value = "B";
                    optionB.textContent = "B";
                    const optionC = document.createElement("option");
                    optionC.value = "C";
                    optionC.textContent = "C";
                  
                    shiftSelect.appendChild(optionA);
                    shiftSelect.appendChild(optionB);
                    shiftSelect.appendChild(optionC);
                  
                    // Simulating the existing structure
                    document.body.appendChild(dateInput);
                    document.body.appendChild(shiftSelect);
                  
                    function getShift() {
                      const currentTime = new Date().getHours();
                      return currentTime >= 8 && currentTime < 20 ? "A" : "B";
                    }
                  
                    function formatDate(date) {
                      const year = date.getFullYear();
                      const month = String(date.getMonth() + 1).padStart(2, "0");
                      const day = String(date.getDate()).padStart(2, "0");
                      return `${year}-${month}-${day}`;
                    }
                  
                    function loadChart() {
                      const selectedDate = dateInput.value ? new Date(dateInput.value) : new Date();
                      const formattedDate = formatDate(selectedDate);
                      const shift = shiftSelect.value || getShift();
                  
                      // fetch(`http://110.172.134.186:89/hourly_dashboard?dt=${formattedDate}&shift=${shift}`)
                      fetch(`http://110.172.134.186:89/hourly_dashboard?dt=2023-12-09&shift=a`)
                        .then((response) => response.json())
                        .then((data) => {



                          
                          const categories = data.map((item) => item.tim);
                          const seriesData = data.map((item) => item.line_out);

                          const totalLineOut = seriesData.reduce((acc, curr) => acc + curr, 0);
                  
                          Highcharts.chart("container", {
                            chart: {
                              type: "column",
                                    },
                                    title: {
                                        text: `Total Count -  ${totalLineOut}`,
                                        style: {
                                            fontSize: "40px",
                                        },
                                    },
                                    xAxis: {
                                        categories: categories,
                                        labels: {
                                            style: {
                                                fontSize: "30px",
                                                fontWeight: "bold",
                                            },
                                        },
                                    },
                                    yAxis: {
                                        title: {
                                            text: "Line Out",
                                            style: {
                                                fontSize: "40px",
                                            },
                                        },
                                        labels: {
                                            style: {
                                                fontSize: "30px",
                                                fontWeight: "bold",
                                            },
                                        },
                                    },
                                    plotOptions: {
                                        series: {
                                            pointWidth: 70, // Increase the width of the bars
                                            dataLabels: {
                                                enabled: true,
                                                style: {
                                                    fontSize: "30px",
                                                },
                                            },
                                            lineWidth: 3,
                                        },
                                    },
                                    credits: {
                                        enabled: false,
                                    },
                                    exporting: {
                                        buttons: {
                                            contextButton: {
                                                menuItems: [
                                                    'viewFullscreen',
                                                    'printChart',
                                                    'downloadPNG',
                                                    'downloadJPEG',
                                                    'downloadPDF',
                                                    'downloadSVG',
                                                    'downloadCSV',
                                                    'downloadXLS',
                                                    'viewData'
                                                ]
                                            }
                                        }
                                    },
                                    series: [{
                                        name: 'Line Out',
                                        data: seriesData
                                    }]
                                });
                            })
                            .catch(error => console.error('Error:', error));
                    }
                
                    // Load the chart when the page loads
                    window.onload = loadChart;
                
                    // Reload the chart when the date or shift changes
                    dateInput.addEventListener('change', loadChart);
                    shiftSelect.addEventListener('change', loadChart);
                </script>
                  
                  <div class="card-body d-flex w-100">
                    <div class="align-self-center chart chart-lg">
                      <div id="container"></div>
                      <div class="label-container" id="chartLabels"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </main>

        <footer class="footer">
          <div class="container-fluid">
            <div class="row text-muted">
              <div class="col-6 text-start">
                <p class="mb-0">
                  <a class="text-muted" href="https://V2SK.in/" target="_blank"
                    ><strong>PG</strong></a
                  >
                  -
                  <a class="text-muted" href="https://V2SK.in/" target="_blank"
                    ><strong>V2SK</strong></a
                  >
                  &copy;
                </p>
              </div>
              <div class="col-6 text-end">
                <ul class="list-inline">
                  <li class="list-inline-item">
                    <a
                      class="text-muted"
                      href="https://V2SK.in/"
                      target="_blank"
                      >Support</a
                    >
                  </li>
                  <li class="list-inline-item">
                    <a
                      class="text-muted"
                      href="https://V2SK.in/"
                      target="_blank"
                      >Help Center</a
                    >
                  </li>
                  <li class="list-inline-item">
                    <a
                      class="text-muted"
                      href="https://V2SK.in/"
                      target="_blank"
                      >Privacy</a
                    >
                  </li>
                  <li class="list-inline-item">
                    <a
                      class="text-muted"
                      href="https://V2SK.in/"
                      target="_blank"
                      >Terms</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </footer>
      </div>
    </div>

    <script src="js/app.js"></script>
  </body>
</html>
